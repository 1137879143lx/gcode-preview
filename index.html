

<title>GCode Previewer in javascript</title>


<header class="controls">
    <h1>GCode Previewer</h1>
    <label>Render layers: <input type="range" min="0" value="0" id="layers" />
    </label>
    <label>Scale: <input type="range" min="1" value="3" max="10" step="0.1" id="scale" />
    </label>
    <label>Rotate: <input type="range" min="0" value="0" max="360"  id="rotation" />
    </label>
    <button id="toggle-animation">toggle animation</button>
    <br>
    <tt>
        <span id="file-info"></span>
        <span id="layer-count"></span>
    </tt>
</header>
<footer>
    <div class="note">By Remco Veldkamp. Tested only in the latest Chrome.</div>

    <a href="https://twitter.com/share" class="twitter-share-button" data-via="remcoder" data-hashtags="3dprinting" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script type="text/javascript" src="//www.redditstatic.com/button/button1.js"></script>
</footer>
<canvas id="renderer"></canvas>
<style>
body {
    margin: 0;
    font-family: Verdana;
    color: #eee;
}
header, footer {
    position: absolute;
    background: rgba(0,0,0,0.5);
    left: 0;
    right: 0;
    padding: 10px;
    text-align: center;
    line-height: 25px;
    transform: translateZ(0);
}
header {
    top: 0;
}
.note {
    font-size: 60%;
}
h1 {
    font-size: 110%;
    margin: 0;
    font-weight: normal;
}
footer {
    bottom: 0;
}
:disabled {
    opacity: 0.5;
}
</style>
<script src="gcode-preview.js"></script>
<script>
    const [canvas, ctx] = initCanvas();
    let limit = 0, scale = 7, rotation = 0;
    let layers, header;
    let rotationAnimation = false;

    // make y go up
    ctx.scale(1,-1);

    // center on 0,0
    ctx.translate(canvas.width/2,-canvas.height/2);

    // draw background
    grid();
    title();
    loading();
</script>
<script src="benchy-slic3r.js"></script>
<script>
    processGCode(sample);
    initEvents();
    startAnimation();
</script>
